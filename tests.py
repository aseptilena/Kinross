#!/usr/bin/env python3.5
# Tests for the Kinback library. The expected output is to the right of the line or on top if too long.
from kinback.ellipse import *
from kinback.svgpath import *

# ((-0.5801753182779774+6.403206599624836j), (-1.2858815280829052+3.2027085369818975j), (7.325416619694055+1.6143915515721436j), (6.37498063919398+5.148446618730812j))
print(intersect_ee(ellipse(3+3j, 4, 5, 0.6), ellipse(3+4j, 7, 2, -0.2)))
# Ellipse centred on (3.5128205128205128, 1.4871794871794872) with axes 3.9086710109630833 and 2.415497581303145, the first axis tilted by -0.24029756940360553
print(ell5pts(3j, 3+4j, 7+2j, 5-1j, 1))
ea = elliparc(0, 2, 1, 10, 1, 0, 2+1j)
eb = elliparc(0, ellipse(0, 2, 1, 0), 3 * pi / 2 - 0.01)
print(ea.length()) # 7.376705574218604
print(eb.ell.quartrarc() * 3) # 7.266336165 410756 (GeoGebra actually gets this wrong: 7.266336165 838058)
print(eb.length()) # 7.246336415408569

flutterbat = "m 234.8635,284.38727 c -12.75544,-38.3858 -7.08863,-56.88501 30.17727,-43.24985 -9.28972,-21.46968 -6.09307,-52.74366 18.43072,-61.36785 -36.81938,-16.2422 -76.08944,17.82595 -86.69206,61.62832 -4.94374,20.42393 -36.46676,32.12865 -53.91378,12.32166 -22.84621,-25.9365 -71.265854,-26.85813 -95.127254,8.91052 22.61488,-6.65669 39.01573,8.40096 45.51244,39.94034 25.493744,-36.92728 36.927294,-25.80274 46.050754,16.28185 12.4897,-25.05516 27.54671,-32.62956 45.4404,-26.5644 9.42181,-16.003 30.86506,-19.1705 50.12151,-7.90059 z m -44.11846,31.00726 c 3.67069,-30.25773 -2.7656,-75.27539 -17.61385,-97.03067 -0.19815,8.74881 -0.64174,16.35065 -1.51737,24.26668 -5.41874,-5.51674 -9.09678,-11.26154 -13.62436,-18.85892 -1.4235,28.54074 17.14845,69.58858 32.75558,91.62291 z" # Real-world example, one of the components of Flutterbat's cutie mark
q = "m 6 0 -5 0 0 2 1 2 C 3 3 4 4 5 6 7 5 7 3 6 0 z l 1 1 h 1 v 1"
qc = "M300,200 h-150 a150,150 0 1,0 150,-150 z" # From the SVG specs
# <6,0 1,0> <1,0 1,2> <1,2 2,4> <2,4 3,3 4,4 5,6> <5,6 7,5 7,3 6,0> 0
# <6,0 7,1> <7,1 8,1> <8,1 8,2>
qp = parsepath(q)
print(prettypath(qp))
# <8,2 8,1> <8,1 7,1> <7,1 6,0>
# <6,0 7,3 7,5 5,6> <5,6 4,4 3,3 2,4> <2,4 1,2> <1,2 1,0> <1,0 6,0> 0
print(prettypath(reversepath(qp)))
print(prettypath(parsepath(qc))) # <300,200 150,200> {300,200 150 150 0 3.141592653589793:-1.5707963267948966} <300,50 300,200> 0
print(prettypath(parsepath(flutterbat))) # The second subpath of this should begin with 190.74504,315.39453

b = bezier(96+78j, 30+30j, 104+43j, 22+81j)
print(b.length()) # 100.86008481303311

a = elliparc(0, 1, 1, 0, 0, 0, 0)
print(a.ell) # None
